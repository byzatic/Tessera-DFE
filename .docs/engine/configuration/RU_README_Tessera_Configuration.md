# Конфигурирование Tessera DFE

Движок Tessera использует XML-файл конфигурации и класс `Configuration.java` для загрузки параметров исполнения, cron-планирования и системных путей.

---

## Конфигурационный файл: `configuration.xml`

Файл должен быть размещён в виде `configuration.xml` и доступен через путь, передаваемый в движок (системное свойство JVM `-Dconfig.file=...`).

### Использование

```bash
java -Dconfig.file=configuration.xml -jar tessera-engine.jar
```

### Пример содержимого

```xml
<Configuration>
    <graphCalculationCronCycle>*/10 * * * * *</graphCalculationCronCycle>
    <initializeStorageByRequest>false</initializeStorageByRequest>
    <dataDirectory>/My/Awesome/Data/Directory</dataDirectory>
    <projectName>MyAwesomeProject</projectName>
</Configuration>
```

### Таблица параметров

| Параметр                     | Описание                                                                                                                                                                                                                                                                                                                                                          |
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `graphCalculationCronCycle`   | Cron-выражение для запуска **graphManager**. Поддерживается 5 или 6 полей (`[секунды] минуты часы день-месяца месяц день-недели`). Специфические Quartz-токены (`?`, `L`, `W`, `#`) не поддерживаются. Примеры: `*/10 * * * * *` — каждые 10 секунд; `0 */5 * * * *` — каждые 5 минут; `0 15 10 * * *` — каждый день в 10:15; `0 0 12 * * 1-5` — в 12:00 по будням. |
| `initializeStorageByRequest`  | Булево значение (`true`/`false`). Определяет, нужно ли инициализировать хранилище только по запросу, а не автоматически.                                                                                                                                                                                                                                          |
| `dataDirectory`               | Абсолютный путь к каталогу данных, используемому системой для загрузки проектов.                                                                                                                                                                                                                                                                                  |
| `projectName`                 | Человекочитаемое имя проекта, которое используется движком для идентификации в `dataDirectory`.                                                                                                                                                                                                                                                                                  |

---

### Синтаксис Cron

- **Формат:** `секунды минуты часы день-месяца месяц день-недели`
- Если указано только 5 полей, поле `секунды` принимается равным `0`.
- Поддерживаемые токены в поле:
  - `*` — любое значение
  - точное число (например, `5`)
  - диапазон (`a-b`)
  - список (`a,b,c`)
  - шаг (`*/n`)
  - диапазон со шагом (`a-b/n`)
- Не поддерживаются Quartz-токены: `?`, `L`, `W`, `#`
- `Day-of-Week` использует диапазон `0–6`, где `0 = Sunday`
- Для совпадения требуется выполнение обоих условий: `Day-of-Month` **и** `Day-of-Week`

#### Примеры:
- `*/10 * * * * *` — каждые 10 секунд
- `0 */5 * * * *` — каждые 5 минут
- `0 15 10 * * *` — каждый день в 10:15:00
- `0 0 12 * * 1-5` — в 12:00:00 с понедельника по пятницу

> **Важно:** \
> Запись Quartz-стиля `*/10 * * * * ?` недопустима. Нужно использовать `*/10 * * * * *`.